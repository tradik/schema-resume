<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NG0TH0GXV1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NG0TH0GXV1');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schema Resume Validator - JSON-LD CV Linter</title>
    <meta name="description" content="Validate and lint your JSON-LD CV/Resume against the Schema Resume specification. Real-time validation with detailed error messages and suggestions.">
    <meta name="keywords" content="JSON Schema Validator, Resume Validator, CV Linter, JSON-LD Validator, Schema.org Validator, Resume Parser">
    <meta name="author" content="Tradik">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://schema-resume.org/validator.html">
    <link rel="alternate" href="https://tradik.github.io/schema-resume/validator.html">
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://schema-resume.org/validator.html">
    <meta property="og:title" content="Schema Resume Validator - JSON-LD CV Linter">
    <meta property="og:description" content="Validate and lint your JSON-LD CV/Resume against the Schema Resume specification. Real-time validation with detailed error messages.">
    <meta property="og:image" content="https://schema-resume.org/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Schema Resume">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://schema-resume.org/validator.html">
    <meta property="twitter:title" content="Schema Resume Validator - JSON-LD CV Linter">
    <meta property="twitter:description" content="Validate and lint your JSON-LD CV/Resume against the Schema Resume specification. Real-time validation with detailed error messages.">
    <meta property="twitter:image" content="https://schema-resume.org/og-image.png">
    <meta name="twitter:creator" content="@tradik">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Schema Resume Validator",
      "applicationCategory": "DeveloperApplication",
      "description": "Online validator for JSON-LD CV/Resume documents against the Schema Resume specification",
      "url": "https://tradik.github.io/schema-resume/validator.html",
      "author": {
        "@type": "Organization",
        "name": "Tradik"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "browserRequirements": "Requires JavaScript. Works with modern browsers.",
      "operatingSystem": "Any",
      "isPartOf": {
        "@type": "SoftwareApplication",
        "name": "Schema Resume",
        "url": "https://tradik.github.io/schema-resume/"
      }
    }
    </script>
    
    <!-- TailwindCSS CDN - Note: For production use, consider installing via PostCSS or Tailwind CLI -->
    <!-- See: https://tailwindcss.com/docs/installation -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Ajv JSON Schema Validator - Using older stable version with known browser support -->
    <script src="https://cdn.jsdelivr.net/npm/ajv@6.12.6/dist/ajv.min.js"></script>
    
    <style>
        .error-line {
            background-color: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
        }
        .warning-line {
            background-color: rgba(251, 191, 36, 0.1);
            border-left: 3px solid #fbbf24;
        }
        .success-line {
            background-color: rgba(34, 197, 94, 0.1);
            border-left: 3px solid #22c55e;
        }
        .code-editor {
            font-family: monospace;
        }
        
        header a:hover {
            background-color: rgba(255, 255, 255, 0.2) !important;
        }
        
        footer a:hover {
            text-decoration: underline !important;
        }
    </style>
</head>
<body class="bg-white min-h-screen">
    <!-- Header -->
    <header style="background-color: #990000; color: white; padding: 20px 0; border-bottom: 3px solid #7a0000;">
        <div class="container mx-auto px-4">
            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 15px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span role="img" aria-label="Document" style="font-size: 32px;">📄</span>
                    <h1 style="margin: 0; font-size: 140%; font-family: Verdana, Geneva, 'DejaVu Sans', sans-serif; font-weight: bold;">Schema Resume</h1>
                </div>
                <div style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap;">
                    <a href="./index.html" style="color: white; text-decoration: none; font-size: 90%; padding: 6px 12px; border-radius: 4px; transition: background-color 0.2s;">Home</a>
                    <a href="./validator.html" style="color: white; text-decoration: none; font-size: 90%; padding: 6px 12px; border-radius: 4px; background-color: rgba(255, 255, 255, 0.2);">Validator</a>
                    <a href="./converter.html" style="color: white; text-decoration: none; font-size: 90%; padding: 6px 12px; border-radius: 4px; transition: background-color 0.2s;">Converter</a>
                    <a href="https://github.com/tradik/schema-resume" style="color: white; text-decoration: none; font-size: 90%; padding: 6px 12px; border-radius: 4px; transition: background-color 0.2s;">GitHub</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Page Title -->
    <div style="background-color: #eeeeee; border-bottom: 1px solid #cccccc; padding: 20px 0;">
        <div class="container mx-auto px-4">
            <h2 style="margin: 0; font-size: 140%; color: #000000; font-family: Verdana, Geneva, 'DejaVu Sans', sans-serif; font-weight: bold;">Validator</h2>
            <p style="margin: 5px 0 0 0; color: #666666; font-size: 95%; font-family: Verdana, Geneva, 'DejaVu Sans', sans-serif;">JSON-LD CV/Resume Linter & Validator</p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Input Section -->
            <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
                <div class="bg-primary px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2 text-white">
                            <i data-lucide="code" size="20"></i>
                            <h2 class="text-lg font-semibold">JSON-LD Input</h2>
                        </div>
                        <div class="flex gap-2">
                            <button id="loadExample" class="px-3 py-1 bg-white/20 hover:bg-white/30 text-white text-sm rounded-lg transition-colors flex items-center gap-1">
                                <i data-lucide="file-text" size="16"></i>
                                Example
                            </button>
                            <button id="clearInput" class="px-3 py-1 bg-white/20 hover:bg-white/30 text-white text-sm rounded-lg transition-colors flex items-center gap-1">
                                <i data-lucide="trash-2" size="16"></i>
                                Clear
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="p-6">
                    <textarea 
                        id="jsonInput" 
                        class="w-full h-[600px] p-4 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 code-editor text-sm resize-none"
                        placeholder='Paste your JSON-LD CV here...

Example:
{
  "$schema": "https://tradik.github.io/schema-resume/schema.json",
  "@context": "https://tradik.github.io/schema-resume/schema.json",
  "basics": {
    "name": "John Doe",
    "email": "john@example.com"
  }
}'
                    ></textarea>
                    
                    <div class="mt-4 flex gap-3">
                        <button id="validateBtn" class="flex-1 bg-primary hover:bg-secondary text-white font-bold py-3 px-6 rounded-freebsd transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2">
                            <i data-lucide="check-circle" size="20"></i>
                            Validate JSON-LD
                        </button>
                        <button id="formatBtn" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-3 px-6 rounded-lg transition-colors flex items-center gap-2">
                            <i data-lucide="align-left" size="20"></i>
                            Format
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
                <div class="bg-gray-700 px-6 py-4">
                    <div class="flex items-center gap-2 text-white">
                        <i data-lucide="list-checks" size="20"></i>
                        <h2 class="text-lg font-semibold">Validation Results</h2>
                    </div>
                </div>
                
                <div id="results" class="p-6 h-[680px] overflow-y-auto">
                    <div class="flex flex-col items-center justify-center h-full text-center text-slate-400">
                        <i data-lucide="arrow-left" size="48" class="mb-4 opacity-50"></i>
                        <p class="text-lg font-medium">Paste your JSON-LD and click "Validate"</p>
                        <p class="text-sm mt-2">The validator will check your CV against the Schema Resume specification</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
            <div class="bg-white rounded-xl shadow-md border border-slate-200 p-6">
                <div class="flex items-start gap-3">
                    <div class="bg-blue-100 p-2 rounded-lg">
                        <i data-lucide="shield-check" class="text-blue-600" size="24"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold text-slate-900 mb-1">JSON Schema Validation</h3>
                        <p class="text-sm text-slate-600">Validates against the official Schema Resume v1.1.0 specification</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-md border border-slate-200 p-6">
                <div class="flex items-start gap-3">
                    <div class="bg-green-100 p-2 rounded-lg">
                        <i data-lucide="link" class="text-green-600" size="24"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold text-slate-900 mb-1">JSON-LD Support</h3>
                        <p class="text-sm text-slate-600">Checks for proper @context and Schema.org compatibility</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-md border border-slate-200 p-6">
                <div class="flex items-start gap-3">
                    <div class="bg-purple-100 p-2 rounded-lg">
                        <i data-lucide="zap" class="text-purple-600" size="24"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold text-slate-900 mb-1">Instant Feedback</h3>
                        <p class="text-sm text-slate-600">Real-time validation with detailed error messages and suggestions</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Documentation Link -->
        <div class="mt-8 bg-gray-100 rounded-freebsd border border-gray-300 p-6">
            <div class="flex items-start gap-4">
                <div class="bg-gray-200 p-3 rounded-freebsd">
                    <i data-lucide="book-open" class="text-primary" size="28"></i>
                </div>
                <div class="flex-1">
                    <h3 class="text-lg font-semibold text-slate-900 mb-2">Need Help?</h3>
                    <p class="text-slate-700 mb-3">Check out the documentation to learn more about the Schema Resume format and JSON-LD integration.</p>
                    <div class="flex gap-3">
                        <a href="https://github.com/tradik/schema-resume" target="_blank" class="inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-lg border border-slate-300 transition-colors">
                            <i data-lucide="github" size="18"></i>
                            GitHub Repository
                        </a>
                        <a href="./JSON-LD.md" target="_blank" class="inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-lg border border-slate-300 transition-colors">
                            <i data-lucide="file-text" size="18"></i>
                            JSON-LD Guide
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer style="text-align: center; padding: 40px 20px; color: #737373; border-top: 1px solid #cccccc; margin-top: 40px; font-size: 0.9em; line-height: 1.3em; font-family: Verdana, Geneva, 'DejaVu Sans', sans-serif;">
        <div class="container mx-auto px-4">
            <p>&copy; 2025 Schema Resume. Released under the MIT License.</p>
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                <a href="https://github.com/tradik/schema-resume" style="color: #990000; text-decoration: none;">GitHub</a>
                <a href="https://github.com/tradik/schema-resume/issues" style="color: #990000; text-decoration: none;">Issues</a>
                <a href="https://github.com/tradik/schema-resume/blob/main/LICENSE" style="color: #990000; text-decoration: none;">License</a>
                <a href="./validator.html" style="color: #990000; text-decoration: none;">Validator</a>
                <a href="./converter.html" style="color: #990000; text-decoration: none;">Converter</a>
            </div>
            <p style="margin-top: 20px; font-size: 0.9rem;">Made with <span role="img" aria-label="love">❤️</span> for the developer community</p>
        </div>
    </footer>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Schema URL
        const SCHEMA_URL = 'https://tradik.github.io/schema-resume/schema.json';
        const SCHEMA_LOCAL = './schema.json';

        // Initialize Ajv
        let ajv;
        let validate;
        let schemaData;

        // Load schema
        async function loadSchema() {
            try {
                // Wait for Ajv to be available (Ajv v6 exports as window.Ajv)
                if (typeof window.Ajv === 'undefined') {
                    console.log('Waiting for Ajv to load...');
                    setTimeout(loadSchema, 100);
                    return;
                }

                // Try to load from local first, fallback to CDN
                let response;
                try {
                    response = await fetch(SCHEMA_LOCAL);
                    if (!response.ok) throw new Error('Local schema not found');
                } catch (e) {
                    response = await fetch(SCHEMA_URL);
                }
                
                schemaData = await response.json();
                
                // Create a clean schema for Ajv (remove JSON-LD specific fields)
                const cleanSchema = { ...schemaData };
                delete cleanSchema['@context'];
                delete cleanSchema['$schema'];
                delete cleanSchema['$id'];
                
                // Initialize Ajv (v6 has built-in format validation)
                ajv = new window.Ajv({
                    allErrors: true,
                    verbose: true,
                    format: 'full',
                    schemaId: 'auto'
                });
                
                // Compile schema
                validate = ajv.compile(cleanSchema);
                
                console.log('Schema loaded successfully');
            } catch (error) {
                console.error('Failed to load schema:', error);
                showError('Failed to load validation schema. Please check your internet connection.');
            }
        }

        // Example CV data
        const exampleCV = {
            "$schema": "https://tradik.github.io/schema-resume/schema.json",
            "@context": "https://tradik.github.io/schema-resume/schema.json",
            "basics": {
                "name": "Jane Smith",
                "label": "Senior Software Engineer",
                "image": "https://example.com/photo.jpg",
                "email": "jane.smith@example.com",
                "phone": "+44 20 1234 5678",
                "url": "https://janesmith.dev",
                "summary": "Experienced software engineer with 8+ years in full-stack development, specializing in cloud-native applications and microservices architecture.",
                "location": {
                    "city": "London",
                    "countryCode": "GB",
                    "region": "England"
                },
                "profiles": [
                    {
                        "network": "LinkedIn",
                        "username": "janesmith",
                        "url": "https://linkedin.com/in/janesmith"
                    },
                    {
                        "network": "GitHub",
                        "username": "janesmith",
                        "url": "https://github.com/janesmith"
                    }
                ]
            },
            "work": [
                {
                    "name": "Tech Corp",
                    "position": "Senior Software Engineer",
                    "startDate": "2020-03",
                    "url": "https://techcorp.com",
                    "summary": "Leading development of cloud-native microservices",
                    "highlights": [
                        "Architected and deployed 15+ microservices on Kubernetes",
                        "Reduced deployment time by 60% through CI/CD automation"
                    ]
                }
            ],
            "education": [
                {
                    "institution": "University of Technology",
                    "area": "Computer Science",
                    "studyType": "Bachelor",
                    "startDate": "2012-09",
                    "endDate": "2016-06",
                    "score": "First Class Honours"
                }
            ],
            "skills": [
                {
                    "name": "Backend Development",
                    "level": "Expert",
                    "yearsOfExperience": 8,
                    "keywords": ["Node.js", "Python", "Go", "Java"]
                },
                {
                    "name": "Cloud & DevOps",
                    "level": "Advanced",
                    "yearsOfExperience": 6,
                    "keywords": ["AWS", "Kubernetes", "Docker", "Terraform"]
                }
            ],
            "languages": [
                {
                    "language": "English",
                    "fluency": "Native"
                },
                {
                    "language": "Spanish",
                    "fluency": "Intermediate"
                }
            ]
        };

        // DOM elements
        const jsonInput = document.getElementById('jsonInput');
        const validateBtn = document.getElementById('validateBtn');
        const formatBtn = document.getElementById('formatBtn');
        const loadExampleBtn = document.getElementById('loadExample');
        const clearInputBtn = document.getElementById('clearInput');
        const resultsDiv = document.getElementById('results');

        // Event listeners
        validateBtn.addEventListener('click', validateJSON);
        formatBtn.addEventListener('click', formatJSON);
        loadExampleBtn.addEventListener('click', loadExample);
        clearInputBtn.addEventListener('click', clearInput);

        // Load example
        function loadExample() {
            jsonInput.value = JSON.stringify(exampleCV, null, 2);
        }

        // Clear input
        function clearInput() {
            jsonInput.value = '';
            resultsDiv.innerHTML = `
                <div class="flex flex-col items-center justify-center h-full text-center text-slate-400">
                    <i data-lucide="arrow-left" size="48" class="mb-4 opacity-50"></i>
                    <p class="text-lg font-medium">Paste your JSON-LD and click "Validate"</p>
                    <p class="text-sm mt-2">The validator will check your CV against the Schema Resume specification</p>
                </div>
            `;
            lucide.createIcons();
        }

        // Format JSON
        function formatJSON() {
            try {
                const json = JSON.parse(jsonInput.value);
                jsonInput.value = JSON.stringify(json, null, 2);
                showSuccess('JSON formatted successfully!');
            } catch (error) {
                showError('Invalid JSON: ' + error.message);
            }
        }

        // Validate JSON
        function validateJSON() {
            if (!validate) {
                showError('Schema not loaded yet. Please wait...');
                return;
            }

            const input = jsonInput.value.trim();
            
            if (!input) {
                showError('Please paste your JSON-LD CV data first.');
                return;
            }

            let data;
            try {
                data = JSON.parse(input);
            } catch (error) {
                showParseError(error);
                return;
            }

            // Validate against schema
            const valid = validate(data);
            
            // Additional JSON-LD checks
            const jsonLdIssues = validateJSONLD(data);
            
            // Display results
            if (valid && jsonLdIssues.length === 0) {
                showValidationSuccess(data);
            } else {
                showValidationErrors(validate.errors || [], jsonLdIssues, data);
            }
        }

        // Validate JSON-LD specific requirements
        function validateJSONLD(data) {
            const issues = [];

            // Check for @context
            if (!data['@context']) {
                issues.push({
                    type: 'warning',
                    message: 'Missing @context field',
                    suggestion: 'Add "@context": "https://tradik.github.io/schema-resume/schema.json" for JSON-LD compatibility',
                    path: '/@context'
                });
            }

            // Check for $schema
            if (!data['$schema']) {
                issues.push({
                    type: 'warning',
                    message: 'Missing $schema field',
                    suggestion: 'Add "$schema": "https://tradik.github.io/schema-resume/schema.json" for validation',
                    path: '/$schema'
                });
            }

            // Check ISO 8601 date formats
            const dateFields = findDateFields(data);
            dateFields.forEach(field => {
                if (!isValidISO8601(field.value)) {
                    issues.push({
                        type: 'error',
                        message: `Invalid date format at ${field.path}`,
                        suggestion: 'Use ISO 8601 format: YYYY-MM-DD, YYYY-MM, or YYYY',
                        path: field.path
                    });
                }
            });

            return issues;
        }

        // Find date fields in object
        function findDateFields(obj, path = '') {
            const dateFields = [];
            const dateFieldNames = ['startDate', 'endDate', 'date', 'releaseDate', 'validTo', 'lastModified'];

            for (const key in obj) {
                if (obj.hasOwnProperty(key)) {
                    const currentPath = path ? `${path}/${key}` : key;
                    const value = obj[key];

                    if (dateFieldNames.includes(key) && typeof value === 'string') {
                        dateFields.push({ path: currentPath, value });
                    } else if (typeof value === 'object' && value !== null) {
                        dateFields.push(...findDateFields(value, currentPath));
                    }
                }
            }

            return dateFields;
        }

        // Validate ISO 8601 date
        function isValidISO8601(dateString) {
            const pattern = /^([1-2][0-9]{3}-[0-1][0-9]-[0-3][0-9]|[1-2][0-9]{3}-[0-1][0-9]|[1-2][0-9]{3})$/;
            return pattern.test(dateString);
        }

        // Show parse error
        function showParseError(error) {
            resultsDiv.innerHTML = `
                <div class="error-line p-4 rounded-lg mb-4">
                    <div class="flex items-start gap-3">
                        <i data-lucide="x-circle" class="text-red-500 flex-shrink-0" size="24"></i>
                        <div class="flex-1">
                            <h3 class="font-semibold text-red-900 mb-1">JSON Parse Error</h3>
                            <p class="text-sm text-red-700">${escapeHtml(error.message)}</p>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-slate-900 mb-2">Common Issues:</h4>
                    <ul class="text-sm text-slate-700 space-y-1 list-disc list-inside">
                        <li>Missing or extra commas</li>
                        <li>Unclosed brackets or braces</li>
                        <li>Unquoted keys or values</li>
                        <li>Trailing commas (not allowed in JSON)</li>
                    </ul>
                </div>
            `;
            lucide.createIcons();
        }

        // Show validation success
        function showValidationSuccess(data) {
            const stats = getDataStats(data);
            
            resultsDiv.innerHTML = `
                <div class="success-line p-4 rounded-lg mb-6">
                    <div class="flex items-start gap-3">
                        <i data-lucide="check-circle" class="text-green-500 flex-shrink-0" size="24"></i>
                        <div class="flex-1">
                            <h3 class="font-semibold text-green-900 mb-1">✓ Validation Passed!</h3>
                            <p class="text-sm text-green-700">Your JSON-LD CV is valid and conforms to the Schema Resume v1.1.0 specification.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-green-50 p-6 rounded-freebsd border border-green-200 mb-6">
                    <h4 class="font-semibold text-slate-900 mb-3 flex items-center gap-2">
                        <i data-lucide="bar-chart-3" size="20"></i>
                        CV Statistics
                    </h4>
                    <div class="grid grid-cols-2 gap-3">
                        ${stats.map(stat => `
                            <div class="bg-white p-3 rounded-lg">
                                <div class="text-2xl font-bold text-slate-900">${stat.value}</div>
                                <div class="text-sm text-slate-600">${stat.label}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <h4 class="font-semibold text-slate-900 mb-2 flex items-center gap-2">
                        <i data-lucide="lightbulb" size="18"></i>
                        Next Steps
                    </h4>
                    <ul class="text-sm text-slate-700 space-y-2">
                        <li class="flex items-start gap-2">
                            <i data-lucide="check" size="16" class="text-blue-600 flex-shrink-0 mt-0.5"></i>
                            <span>Test your CV in the <a href="https://json-ld.org/playground/" target="_blank" class="text-blue-600 hover:underline">JSON-LD Playground</a></span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i data-lucide="check" size="16" class="text-blue-600 flex-shrink-0 mt-0.5"></i>
                            <span>Validate with <a href="https://validator.schema.org/" target="_blank" class="text-blue-600 hover:underline">Schema.org Validator</a></span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i data-lucide="check" size="16" class="text-blue-600 flex-shrink-0 mt-0.5"></i>
                            <span>Embed in your website for better SEO</span>
                        </li>
                    </ul>
                </div>
            `;
            lucide.createIcons();
        }

        // Get data statistics
        function getDataStats(data) {
            const stats = [];
            
            if (data.work) stats.push({ label: 'Work Experiences', value: data.work.length });
            if (data.education) stats.push({ label: 'Education', value: data.education.length });
            if (data.skills) stats.push({ label: 'Skills', value: data.skills.length });
            if (data.projects) stats.push({ label: 'Projects', value: data.projects.length });
            if (data.languages) stats.push({ label: 'Languages', value: data.languages.length });
            if (data.certificates) stats.push({ label: 'Certificates', value: data.certificates.length });
            
            return stats;
        }

        // Show validation errors
        function showValidationErrors(schemaErrors, jsonLdIssues, data) {
            const allErrors = [...schemaErrors.map(e => ({
                type: 'error',
                message: e.message,
                path: e.instancePath || e.dataPath || '/',
                params: e.params,
                keyword: e.keyword
            })), ...jsonLdIssues];

            const errorCount = allErrors.filter(e => e.type === 'error').length;
            const warningCount = allErrors.filter(e => e.type === 'warning').length;

            resultsDiv.innerHTML = `
                <div class="error-line p-4 rounded-lg mb-6">
                    <div class="flex items-start gap-3">
                        <i data-lucide="alert-circle" class="text-red-500 flex-shrink-0" size="24"></i>
                        <div class="flex-1">
                            <h3 class="font-semibold text-red-900 mb-1">Validation Failed</h3>
                            <p class="text-sm text-red-700">
                                Found ${errorCount} error${errorCount !== 1 ? 's' : ''} 
                                ${warningCount > 0 ? `and ${warningCount} warning${warningCount !== 1 ? 's' : ''}` : ''}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="space-y-3">
                    ${allErrors.map((error, index) => `
                        <div class="${error.type === 'error' ? 'error-line' : 'warning-line'} p-4 rounded-lg">
                            <div class="flex items-start gap-3">
                                <i data-lucide="${error.type === 'error' ? 'x-circle' : 'alert-triangle'}" 
                                   class="${error.type === 'error' ? 'text-red-500' : 'text-yellow-600'} flex-shrink-0" 
                                   size="20"></i>
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="text-xs font-mono bg-slate-200 px-2 py-0.5 rounded">${escapeHtml(error.path)}</span>
                                        ${error.keyword ? `<span class="text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-600">${error.keyword}</span>` : ''}
                                    </div>
                                    <p class="text-sm ${error.type === 'error' ? 'text-red-900' : 'text-yellow-900'} font-medium mb-1">
                                        ${escapeHtml(error.message)}
                                    </p>
                                    ${error.suggestion ? `
                                        <p class="text-sm ${error.type === 'error' ? 'text-red-700' : 'text-yellow-700'} mt-2">
                                            💡 ${escapeHtml(error.suggestion)}
                                        </p>
                                    ` : ''}
                                    ${error.params ? `
                                        <details class="mt-2">
                                            <summary class="text-xs text-slate-600 cursor-pointer hover:text-slate-900">Show details</summary>
                                            <pre class="text-xs bg-slate-100 p-2 rounded mt-1 overflow-x-auto">${JSON.stringify(error.params, null, 2)}</pre>
                                        </details>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="mt-6 bg-slate-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-slate-900 mb-2 flex items-center gap-2">
                        <i data-lucide="help-circle" size="18"></i>
                        Need Help?
                    </h4>
                    <ul class="text-sm text-slate-700 space-y-1 list-disc list-inside">
                        <li>Check the <a href="./JSON-LD.md" class="text-blue-600 hover:underline">JSON-LD documentation</a></li>
                        <li>Review the <a href="./schema.json" class="text-blue-600 hover:underline">schema definition</a></li>
                        <li>Load the example CV to see correct format</li>
                    </ul>
                </div>
            `;
            lucide.createIcons();
        }

        // Show error message
        function showError(message) {
            resultsDiv.innerHTML = `
                <div class="error-line p-4 rounded-lg">
                    <div class="flex items-start gap-3">
                        <i data-lucide="x-circle" class="text-red-500 flex-shrink-0" size="24"></i>
                        <div class="flex-1">
                            <h3 class="font-semibold text-red-900 mb-1">Error</h3>
                            <p class="text-sm text-red-700">${escapeHtml(message)}</p>
                        </div>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }

        // Show success message
        function showSuccess(message) {
            const temp = document.createElement('div');
            temp.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2';
            temp.innerHTML = `
                <i data-lucide="check" size="20"></i>
                <span>${escapeHtml(message)}</span>
            `;
            document.body.appendChild(temp);
            lucide.createIcons();
            
            setTimeout(() => {
                temp.remove();
            }, 3000);
        }

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize
        loadSchema();
    </script>
</body>
</html>
